<ion-menu contentId="main-content" side="start" menuId="first" type="overlay">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>Menú</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list>
      <ion-item button routerLink="/update">
        <ion-icon name="create-outline" slot="start"></ion-icon>
        <ion-label>Actualizar</ion-label>
      </ion-item>

      <ion-item button routerLink="/add">
        <ion-icon name="add-circle-outline" slot="start"></ion-icon>
        <ion-label>Agregar</ion-label>
      </ion-item>

      <ion-item button routerLink="/login">
        <ion-icon name="log-out-outline" slot="start"></ion-icon>
        <ion-label>Cerrar sesión</ion-label>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-menu>

<!-- Contenido principal -->
<div id="main-content">
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button></ion-menu-button>
      </ion-buttons>
      <ion-title>Registro</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content class="login-bg">

    <ion-grid fixed>
      <ion-row class="ion-justify-content-center ion-align-items-center" style="min-height: 100vh;">
        <ion-col size="12" size-sm="8" size-md="6" size-lg="4">

          <!-- Botones de idioma -->
          <div class="language-buttons">
            <button
              class="flag-btn"
              [class.active]="currentLang === 'en'"
              (click)="setLanguage('en')">
              <img src="assets/flags/us.png" alt="English" />
            </button>
            <button
              class="flag-btn"
              [class.active]="currentLang === 'es'"
              (click)="setLanguage('es')">
              <img src="assets/flags/co.png" alt="Español" />
            </button>
            <p class="current-lang">
              {{ t('LANGUAGE.CURRENT') || 'Idioma actual' }}: 
              {{ currentLang === 'en' ? 'English' : 'Español' }}
            </p>
          </div>

          <!-- Card registro -->
          <ion-card class="login-card">
            <ion-card-header>
              <ion-card-title class="login-title">
                {{ t('REGISTER.TITLE') || 'Registro' }}
              </ion-card-title>
            </ion-card-header>

            <ion-card-content>
              <form (ngSubmit)="register()">
                <ion-item class="input-item">
                  <ion-label position="floating">{{ t('REGISTER.FIRSTNAME') || 'Nombre' }}</ion-label>
                  <ion-input type="text" [(ngModel)]="firstName" name="firstName" required></ion-input>
                </ion-item>

                <ion-item class="input-item">
                  <ion-label position="floating">{{ t('REGISTER.LASTNAME') || 'Apellido' }}</ion-label>
                  <ion-input type="text" [(ngModel)]="lastName" name="lastName" required></ion-input>
                </ion-item>

                <ion-item class="input-item">
                  <ion-label position="floating">{{ t('REGISTER.EMAIL') || 'Correo electrónico' }}</ion-label>
                  <ion-input type="email" [(ngModel)]="email" name="email" required></ion-input>
                </ion-item>

                <ion-item class="input-item">
                  <ion-label position="floating">{{ t('REGISTER.PASSWORD') || 'Contraseña' }}</ion-label>
                  <ion-input type="password" [(ngModel)]="password" name="password" required></ion-input>
                </ion-item>

                <ion-button expand="block" type="submit" class="btn-main">
                  {{ t('REGISTER.SUBMIT') || 'Registrarse' }}
                </ion-button>

                <!-- Botón Cancelar -->
                <ion-button expand="block" fill="outline" class="btn-main-outline" routerLink="/login">
                  {{ t('REGISTER.CANCEL') || 'Cancelar' }}
                </ion-button>
              </form>
            </ion-card-content>
          </ion-card>

          <!-- Spinner centrado -->
          <div *ngIf="isLoading" class="spinner-overlay">
            <ion-spinner name="crescent"></ion-spinner>
            <p style="margin-top:10px; font-weight:bold; color:#2c3e50;">
              {{ t('LOADING.TEXT') || 'Cargando...' }}
            </p>
          </div>

        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-content>
</div>
